{"version":3,"sources":["sticky-menu.js"],"names":["$","document","ready","activeClass","stickyMenu","$header","$stickyLinks","$footer","currentOffsetTop","on","setTimeout","stickyToFooter","overlayStickyMenu","scrollTop","window","addClass","removeClass","updateCurrentOffsetTop","hasClass","offset","top","height","stickyMenuEl","windowHeight","innerHeight","footerPosition","isFooterVisible","css","clearExpandStickyItem","handleWindowScroll","length","e","isMobile","preventDefault"],"mappings":";;AAAAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AAC3B,MAAMC,cAAc,QAApB;AACA,MAAMC,aAAa,wBAAnB;;AAEA,MAAMC,UAAUL,EAAE,YAAF,CAAhB;AACA,MAAMM,eAAeN,EAAE,iBAAF,CAArB;;AAEA,MAAIO,UAAUP,EAAE,YAAF,CAAd;;AAEA,MAAIQ,yBAAJ;;AAEAR,IAAE,eAAF,EAAmBS,EAAnB,CAAsB,OAAtB,EAA+B,YAAW;AACxCC,eAAW,YAAW;AACpBC;AACD,KAFD,EAEG,GAFH;AAGD,GAJD;;AAMA,WAASC,iBAAT,GAA6B;AAC3B,QAAMC,YAAYb,EAAEc,MAAF,EAAUD,SAAV,EAAlB;;AAEA,QAAIA,YAAYL,gBAAhB,EAAkC;AAChCR,cAAMI,UAAN,EAAoBW,QAApB,CAA6BZ,WAA7B;AACD,KAFD,MAEO;AACLH,cAAMI,UAAN,EAAoBY,WAApB,CAAgCb,WAAhC;AACD;AACF;;AAED,WAASc,sBAAT,GAAkC;AAChCT,uBAAmBR,QAAMI,UAAN,EAAoBc,QAApB,CAA6Bf,WAA7B,IACjBK,gBADiB,GACER,QAAMI,UAAN,EAAoBe,MAApB,GAA6BC,GAA7B,GAAmCf,QAAQgB,MAAR,EADxD;AAED;;AAED,WAASV,cAAT,GAA0B;AACxB,QAAMW,eAAetB,QAAMI,UAAN,CAArB;AACA,QAAI,CAACkB,aAAaJ,QAAb,CAAsBf,WAAtB,CAAL,EAAyC;AACvC;AACD;;AAED,QAAMoB,eAAeT,OAAOU,WAA5B;AACA,QAAMC,iBAAiBlB,QAAQY,MAAR,GAAiBC,GAAxC;AACA,QAAMM,kBAAkB1B,EAAEc,MAAF,EAAUD,SAAV,KAAwBU,YAAxB,IAAwCE,cAAhE;;AAEAH,iBAAaK,GAAb,CAAiB,QAAjB,EAA2BD,kBAAqB1B,EAAEc,MAAF,EAAUD,SAAV,KAAwBU,YAAxB,GAAuCE,cAA5D,UAAiF,GAA5G;AACD;;AAED,WAASG,qBAAT,GAAiC;AAC/BtB,iBAAaU,WAAb,CAAyBb,WAAzB;AACD;;AAED,WAAS0B,kBAAT,GAA8B;AAC5B,QAAG,CAAC7B,QAAMI,UAAN,EAAoB0B,MAAxB,EAAgC;AAC9B;AACD;;AAEDlB;AACAK;AACAW;AACAjB;AACD;;AAED,MAAGX,QAAMI,UAAN,EAAoB0B,MAAvB,EAA+B;AAC7Bb;;AAEAjB,MAAEc,MAAF,EAAUL,EAAV,CAAa,QAAb,EAAuBoB,kBAAvB;;AAEA7B,MAAEc,MAAF,EAAUL,EAAV,CAAa,QAAb,EAAuBoB,kBAAvB;;AAEAvB,iBAAaG,EAAb,CAAgB,OAAhB,EAAyB,UAASsB,CAAT,EAAY;AACnC,UAAI,CAACjB,OAAOkB,QAAP,EAAD,IAAsBhC,EAAE,IAAF,EAAQkB,QAAR,CAAiBf,WAAjB,CAA1B,EAAyD;AACvD,eAAO,IAAP;AACD;;AAEDG,mBAAaU,WAAb,CAAyBb,WAAzB;;AAEAH,QAAE,IAAF,EAAQe,QAAR,CAAiBZ,WAAjB;;AAEA4B,QAAEE,cAAF;AACD,KAVD;AAWD;AACF,CA/ED","file":"sticky-menu.js","sourcesContent":["$(document).ready(function() {\r\n  const activeClass = 'active';\r\n  const stickyMenu = 'js-sticky-menu:visible';\r\n\r\n  const $header = $('.js-header');\r\n  const $stickyLinks = $('.js-sticky-link');\r\n\r\n  var $footer = $('.js-footer');\r\n\r\n  let currentOffsetTop;\r\n\r\n  $('.js-tab-click').on('click', function() {\r\n    setTimeout(function() {\r\n      stickyToFooter();\r\n    }, 100);\r\n  });\r\n\r\n  function overlayStickyMenu() {\r\n    const scrollTop = $(window).scrollTop();\r\n\r\n    if (scrollTop > currentOffsetTop) {\r\n      $(`.${stickyMenu}`).addClass(activeClass);\r\n    } else {\r\n      $(`.${stickyMenu}`).removeClass(activeClass);\r\n    }\r\n  }\r\n\r\n  function updateCurrentOffsetTop() {\r\n    currentOffsetTop = $(`.${stickyMenu}`).hasClass(activeClass) ?\r\n      currentOffsetTop : $(`.${stickyMenu}`).offset().top - $header.height();\r\n  }\r\n\r\n  function stickyToFooter() {\r\n    const stickyMenuEl = $(`.${stickyMenu}`);\r\n    if (!stickyMenuEl.hasClass(activeClass)) {\r\n      return;\r\n    }\r\n\r\n    const windowHeight = window.innerHeight;\r\n    const footerPosition = $footer.offset().top;\r\n    const isFooterVisible = $(window).scrollTop() + windowHeight >= footerPosition;\r\n\r\n    stickyMenuEl.css('bottom', isFooterVisible ? `${$(window).scrollTop() + windowHeight - footerPosition}px` : '0');\r\n  }\r\n\r\n  function clearExpandStickyItem() {\r\n    $stickyLinks.removeClass(activeClass);\r\n  }\r\n\r\n  function handleWindowScroll() {\r\n    if(!$(`.${stickyMenu}`).length) {\r\n      return;\r\n    }\r\n\r\n    overlayStickyMenu();\r\n    updateCurrentOffsetTop();\r\n    clearExpandStickyItem();\r\n    stickyToFooter();\r\n  }\r\n\r\n  if($(`.${stickyMenu}`).length) {\r\n    updateCurrentOffsetTop();\r\n\r\n    $(window).on('scroll', handleWindowScroll);\r\n\r\n    $(window).on('resize', handleWindowScroll);\r\n\r\n    $stickyLinks.on('click', function(e) {\r\n      if (!window.isMobile() || $(this).hasClass(activeClass)) {\r\n        return true;\r\n      }\r\n\r\n      $stickyLinks.removeClass(activeClass);\r\n\r\n      $(this).addClass(activeClass);\r\n\r\n      e.preventDefault();\r\n    });\r\n  }\r\n});\r\n"]}